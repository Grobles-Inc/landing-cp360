---
import Layout from '../layouts/BaseLayout.astro';
---

<Layout title="Contacto - CP.360°" description="Contáctanos para solicitar información sobre nuestros servicios de control de producción">
  <section class="bg-gray-50 py-20">
    <div class="  px-4">
      <div class="text-center mb-12">
        <h1 class="text-3xl md:text-5xl font-bold text-gray-800 mb-4" data-aos="fade-up">
          Contáctanos
        </h1>
        <p class="text-lg md:text-xl font-semibold text-gray-600" data-aos="fade-up" data-aos-delay="100">
          Estamos emocionados de escuchar tus ideas y necesidades.
        </p>
      </div>

      <!-- Información de Contacto -->
      <div class="grid md:grid-cols-2 max-w-5xl mx-auto gap-10 items-center py-20">
        <div class="flex-1" data-aos="fade-up" data-aos-delay="200">
          <h2 class="text-3xl md:text-5xl text-center md:text-left font-bold text-gray-700 mb-4">Información de Contacto</h2>
          <ul class="text-gray-700 space-y-2 mb-4">
            <li>
              <span class="font-semibold">Teléfono:</span> <a href="tel:971419928" class="text-primary hover:underline font-bold">971 419 928</a>
            </li>
            <li>
              <span class="font-semibold">Email:</span> <a href="mailto:abccostos.bravo@gmail.com" class="text-primary hover:underline font-bold">abccostos.bravo@gmail.com</a>
            </li>
            <li>
              <span class="font-semibold">Dirección:</span> Lima, Perú
            </li>
            <li>
              <span class="font-semibold">Horario de atención:</span> Lunes a Viernes, 8:00 a.m. - 6:00 p.m.
            </li>
          </ul>
          <p class="text-gray-600">
            Estamos listos para ayudarte a transformar el control de tus proyectos.
          </p>
        </div>
        <div class="flex-1" data-aos="fade-up" data-aos-delay="300">
          <img src="https://images.unsplash.com/photo-1487017159836-4e23ece2e4cf?q=80&w=1171&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Contacto" class="w-full h-full object-cover rounded-2xl shadow-lg">
        </div>
      </div>

      <div class="text-center mb-12">
        <h1 class="text-3xl md:text-5xl font-bold text-gray-800 mb-4" data-aos="fade-up">
          Formulario de Contacto
        </h1>
        <p class="text-lg md:text-xl font-semibold text-gray-600" data-aos="fade-up" data-aos-delay="100">
          Envianos un mensaje y nos pondremos en contacto contigo lo antes posible.
        </p>
      </div>

      <!-- Formulario de contacto -->
      <div data-aos="fade-up" data-aos-delay="200">
        <form 
          class="bg-[#fef2f2] p-8 rounded-2xl max-w-4xl mx-auto gap-4 space-y-6 lg:space-y-10" 
          method="POST"
          id="contactForm"
        >
          <!-- Campo Nombre -->
          <div>
            <label for="nombre" class="block text-sm font-semibold text-gray-700 mb-2">
              Nombre Completo *
            </label>
            <input
              type="text"
              id="nombre"
              name="nombre"
              required
              class="w-full px-4 py-3 border border-gray-300 rounded-2xl focus:ring-2 focus:ring-red-600 focus:border-red-600 transition-colors"
              placeholder="Tu nombre completo"
            />
          </div>

          <!-- Campo Empresa -->
          <div>
            <label for="empresa" class="block text-sm font-semibold text-gray-700 mb-2">
              Empresa *
            </label>
            <input
              type="text"
              id="empresa"
              name="empresa"
              required
              class="w-full px-4 py-3 border border-gray-300 rounded-2xl focus:ring-2 focus:ring-red-600 focus:border-red-600 transition-colors"
              placeholder="Nombre de tu empresa"
            />
          </div>

          <!-- Campo Mensaje -->
          <div>
            <label for="mensaje" class="block text-sm font-semibold text-gray-700 mb-2">
              Mensaje *
            </label>
            <textarea
              id="mensaje"
              name="mensaje"
              rows="5"
              required
              class="w-full px-4 py-3 border border-gray-300 rounded-2xl focus:ring-2 focus:ring-red-600 focus:border-red-600 transition-colors resize-none"
              placeholder="Cuéntanos sobre tu proyecto y cómo podemos ayudarte..."
            ></textarea>
          </div>

          <!-- Botón de envío -->
          <button
            type="submit"
            class="mt-5 w-full bg-primary text-white py-3 rounded-2xl cursor-pointer hover:bg-white hover:text-primary border-2 border-primary transition-all duration-700 ease-in-out text-xl font-bold"
          >
            Enviar Mensaje
          </button>
        </form>
      </div>
    </div>
  </section>
</Layout>

<script>
  import { sendWhatsappMessage } from "../utils/whatsapp";

  document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('contactForm') as HTMLFormElement;

    if (form) {
      form.addEventListener('submit', function(e) {
        e.preventDefault();

        const nombre = (document.getElementById('nombre') as HTMLInputElement).value;
        const empresa = (document.getElementById('empresa') as HTMLInputElement).value;
        const mensaje = (document.getElementById('mensaje') as HTMLTextAreaElement).value;

        if (nombre && empresa && mensaje) {
          sendWhatsappMessage({
            nombre: nombre,
            empresa: empresa,
            mensaje: mensaje,
          });

          form.reset();
          alert('Mensaje enviado correctamente');
        } else {
          alert('Por favor, complete todos los campos requeridos');
        }
      })
    }
  })
</script>
